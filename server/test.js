const resultados = [
  {
    _id: "64f62447da443d17069b09fa",
    gameId: "1121",
    local: 11,
    visitor: 2,
    hour: "18:00",
    played: false,
    date: 1,
    categorie: "masculino",
    localGoals: 1,
    visitorGoals: 2,
    createdAt: "2023-09-04T18:39:03.799Z",
    updatedAt: "2023-09-04T18:39:03.799Z",
    __v: 0,
  },
  {
    _id: "64f62447da443d17069b09fc",
    gameId: "18191",
    local: 18,
    visitor: 19,
    hour: "18:30",
    played: false,
    date: 1,
    categorie: "femenino",
    localGoals: 1,
    visitorGoals: 1,
    createdAt: "2023-09-04T18:39:03.986Z",
    updatedAt: "2023-09-04T18:39:03.986Z",
    __v: 0,
  },
  {
    _id: "64f62448da443d17069b09fe",
    gameId: "3101",
    local: 3,
    visitor: 10,
    hour: "18:30",
    played: false,
    date: 1,
    categorie: "masculino",
    localGoals: 5,
    visitorGoals: 2,
    createdAt: "2023-09-04T18:39:04.196Z",
    updatedAt: "2023-09-04T18:39:04.196Z",
    __v: 0,
  },
  {
    _id: "64f62448da443d17069b0a00",
    gameId: "15171",
    local: 15,
    visitor: 17,
    hour: "18:30",
    played: false,
    date: 1,
    categorie: "femenino",
    localGoals: 7,
    visitorGoals: 0,
    createdAt: "2023-09-04T18:39:04.387Z",
    updatedAt: "2023-09-04T18:39:04.387Z",
    __v: 0,
  },
  {
    _id: "64f62448da443d17069b0a02",
    gameId: "1311",
    local: 13,
    visitor: 1,
    hour: "18:30",
    played: false,
    date: 1,
    categorie: "masculino",
    localGoals: 3,
    visitorGoals: 7,
    createdAt: "2023-09-04T18:39:04.668Z",
    updatedAt: "2023-09-04T18:39:04.668Z",
    __v: 0,
  },
  {
    _id: "64f62448da443d17069b0a04",
    gameId: "14161",
    local: 14,
    visitor: 16,
    hour: "18:30",
    played: false,
    date: 1,
    categorie: "femenino",
    localGoals: 0,
    visitorGoals: 5,
    createdAt: "2023-09-04T18:39:04.855Z",
    updatedAt: "2023-09-04T18:39:04.855Z",
    __v: 0,
  },
  {
    _id: "64f62449da443d17069b0a06",
    gameId: "681",
    local: 6,
    visitor: 8,
    hour: "18:30",
    played: false,
    date: 1,
    categorie: "masculino",
    localGoals: 1,
    visitorGoals: 3,
    createdAt: "2023-09-04T18:39:05.035Z",
    updatedAt: "2023-09-04T18:39:05.035Z",
    __v: 0,
  },
  {
    _id: "64f62449da443d17069b0a08",
    gameId: "971",
    local: 9,
    visitor: 7,
    hour: "18:30",
    played: false,
    date: 1,
    categorie: "masculino",
    localGoals: 5,
    visitorGoals: 1,
    createdAt: "2023-09-04T18:39:05.216Z",
    updatedAt: "2023-09-04T18:39:05.216Z",
    __v: 0,
  },
  {
    _id: "64f62449da443d17069b0a0a",
    gameId: "541",
    local: 5,
    visitor: 4,
    hour: "18:30",
    played: false,
    date: 1,
    categorie: "masculino",
    localGoals: 3,
    visitorGoals: 4,
    createdAt: "2023-09-04T18:39:05.402Z",
    updatedAt: "2023-09-04T18:39:05.402Z",
    __v: 0,
  },
  {
    _id: "64f62449da443d17069b0a0c",
    gameId: "272",
    local: 2,
    visitor: 7,
    hour: "18:00",
    played: false,
    date: 2,
    categorie: "masculino",
    localGoals: 10,
    visitorGoals: 1,
    createdAt: "2023-09-04T18:39:05.583Z",
    updatedAt: "2023-09-04T18:39:05.583Z",
    __v: 0,
  },
  {
    _id: "64f62449da443d17069b0a0e",
    gameId: "18172",
    local: 18,
    visitor: 17,
    hour: "18:00",
    played: false,
    date: 2,
    categorie: "femenino",
    localGoals: 2,
    visitorGoals: 6,
    createdAt: "2023-09-04T18:39:05.763Z",
    updatedAt: "2023-09-04T18:39:05.763Z",
    __v: 0,
  },
  {
    _id: "64f62449da443d17069b0a10",
    gameId: "632",
    local: 6,
    visitor: 3,
    hour: "18:00",
    played: false,
    date: 2,
    categorie: "masculino",
    localGoals: 3,
    visitorGoals: 6,
    createdAt: "2023-09-04T18:39:05.944Z",
    updatedAt: "2023-09-04T18:39:05.944Z",
    __v: 0,
  },
  {
    _id: "64f6244ada443d17069b0a12",
    gameId: "15142",
    local: 15,
    visitor: 14,
    hour: "18:00",
    played: false,
    date: 2,
    categorie: "femenino",
    localGoals: 3,
    visitorGoals: 2,
    createdAt: "2023-09-04T18:39:06.122Z",
    updatedAt: "2023-09-04T18:39:06.122Z",
    __v: 0,
  },
  {
    _id: "64f6244ada443d17069b0a14",
    gameId: "8102",
    local: 8,
    visitor: 10,
    hour: "18:00",
    played: false,
    date: 2,
    categorie: "masculino",
    localGoals: 4,
    visitorGoals: 3,
    createdAt: "2023-09-04T18:39:06.302Z",
    updatedAt: "2023-09-04T18:39:06.302Z",
    __v: 0,
  },
  {
    _id: "64f6244ada443d17069b0a16",
    gameId: "16192",
    local: 16,
    visitor: 19,
    hour: "18:00",
    played: false,
    date: 2,
    categorie: "femenino",
    localGoals: 8,
    visitorGoals: 0,
    createdAt: "2023-09-04T18:39:06.482Z",
    updatedAt: "2023-09-04T18:39:06.482Z",
    __v: 0,
  },
  {
    _id: "64f6244ada443d17069b0a18",
    gameId: "11132",
    local: 11,
    visitor: 13,
    hour: "18:00",
    played: false,
    date: 2,
    categorie: "masculino",
    localGoals: 3,
    visitorGoals: 0,
    createdAt: "2023-09-04T18:39:06.666Z",
    updatedAt: "2023-09-04T18:39:06.666Z",
    __v: 0,
  },
  {
    _id: "64f6244ada443d17069b0a1a",
    gameId: "4122",
    local: 4,
    visitor: 12,
    hour: "18:00",
    played: false,
    date: 2,
    categorie: "masculino",
    localGoals: 6,
    visitorGoals: 3,
    createdAt: "2023-09-04T18:39:06.845Z",
    updatedAt: "2023-09-04T18:39:06.845Z",
    __v: 0,
  },
  {
    _id: "64f6244bda443d17069b0a1c",
    gameId: "912",
    local: 9,
    visitor: 1,
    hour: "18:00",
    played: false,
    date: 2,
    categorie: "masculino",
    localGoals: 2,
    visitorGoals: 2,
    createdAt: "2023-09-04T18:39:07.028Z",
    updatedAt: "2023-09-04T18:39:07.028Z",
    __v: 0,
  },
  {
    _id: "64f6244bda443d17069b0a1e",
    gameId: "213",
    local: 2,
    visitor: 1,
    hour: "18:00",
    played: false,
    date: 3,
    categorie: "masculino",
    localGoals: 3,
    visitorGoals: 6,
    createdAt: "2023-09-04T18:39:07.211Z",
    updatedAt: "2023-09-04T18:39:07.211Z",
    __v: 0,
  },
  {
    _id: "64f6244bda443d17069b0a20",
    gameId: "18143",
    local: 18,
    visitor: 14,
    hour: "18:00",
    played: false,
    date: 3,
    categorie: "femenino",
    localGoals: 0,
    visitorGoals: 1,
    createdAt: "2023-09-04T18:39:07.393Z",
    updatedAt: "2023-09-04T18:39:07.393Z",
    __v: 0,
  },
  {
    _id: "64f6244bda443d17069b0a22",
    gameId: "1283",
    local: 12,
    visitor: 8,
    hour: "18:00",
    played: false,
    date: 3,
    categorie: "masculino",
    localGoals: 2,
    visitorGoals: 4,
    createdAt: "2023-09-04T18:39:07.573Z",
    updatedAt: "2023-09-04T18:39:07.573Z",
    __v: 0,
  },
  {
    _id: "64f6244bda443d17069b0a24",
    gameId: "19153",
    local: 19,
    visitor: 15,
    hour: "18:00",
    played: false,
    date: 3,
    categorie: "femenino",
    localGoals: 1,
    visitorGoals: 3,
    createdAt: "2023-09-04T18:39:07.753Z",
    updatedAt: "2023-09-04T18:39:07.753Z",
    __v: 0,
  },
  {
    _id: "64f6244bda443d17069b0a26",
    gameId: "463",
    local: 4,
    visitor: 6,
    hour: "18:00",
    played: false,
    date: 3,
    categorie: "masculino",
    localGoals: 2,
    visitorGoals: 5,
    createdAt: "2023-09-04T18:39:07.932Z",
    updatedAt: "2023-09-04T18:39:07.932Z",
    __v: 0,
  },
  {
    _id: "64f6244cda443d17069b0a28",
    gameId: "16173",
    local: 16,
    visitor: 17,
    hour: "18:00",
    played: false,
    date: 3,
    categorie: "femenino",
    localGoals: 5,
    visitorGoals: 2,
    createdAt: "2023-09-04T18:39:08.175Z",
    updatedAt: "2023-09-04T18:39:08.175Z",
    __v: 0,
  },
  {
    _id: "64f6244cda443d17069b0a2a",
    gameId: "1373",
    local: 13,
    visitor: 7,
    hour: "18:00",
    played: false,
    date: 3,
    categorie: "masculino",
    localGoals: 4,
    visitorGoals: 3,
    createdAt: "2023-09-04T18:39:08.403Z",
    updatedAt: "2023-09-04T18:39:08.403Z",
    __v: 0,
  },
  {
    _id: "64f6244cda443d17069b0a2c",
    gameId: "9113",
    local: 9,
    visitor: 11,
    hour: "18:00",
    played: false,
    date: 3,
    categorie: "masculino",
    localGoals: 3,
    visitorGoals: 1,
    createdAt: "2023-09-04T18:39:08.583Z",
    updatedAt: "2023-09-04T18:39:08.583Z",
    __v: 0,
  },
  {
    _id: "64f6244cda443d17069b0a2e",
    gameId: "1053",
    local: 10,
    visitor: 5,
    hour: "18:00",
    played: false,
    date: 3,
    categorie: "masculino",
    localGoals: 3,
    visitorGoals: 2,
    createdAt: "2023-09-04T18:39:08.765Z",
    updatedAt: "2023-09-04T18:39:08.765Z",
    __v: 0,
  },
  {
    _id: "6501e6f10d607533378fa7c9",
    gameId: "19144",
    local: 19,
    visitor: 14,
    hour: "18:00",
    played: false,
    date: 4,
    categorie: "femenino",
    localGoals: 1,
    visitorGoals: 8,
    createdAt: "2023-09-13T16:44:33.138Z",
    updatedAt: "2023-09-19T15:28:12.258Z",
    __v: 0,
  },
  {
    _id: "6501e7dc0d607533378fa7cb",
    gameId: "1114",
    local: 11,
    visitor: 1,
    hour: "18:30",
    played: false,
    date: 4,
    categorie: "masculino",
    localGoals: 4,
    visitorGoals: 6,
    createdAt: "2023-09-13T16:48:28.021Z",
    updatedAt: "2023-09-19T15:28:15.662Z",
    __v: 0,
  },
  {
    _id: "6501e7f70d607533378fa7cf",
    gameId: "15184",
    local: 15,
    visitor: 18,
    hour: "19:00",
    played: false,
    date: 4,
    categorie: "femenino",
    localGoals: 2,
    visitorGoals: 0,
    createdAt: "2023-09-13T16:48:55.009Z",
    updatedAt: "2023-09-19T15:28:29.323Z",
    __v: 0,
  },
  {
    _id: "6501e9180d607533378fa7d5",
    gameId: "1394",
    local: 13,
    visitor: 9,
    hour: "19:30",
    played: false,
    date: 4,
    categorie: "masculino",
    localGoals: 3,
    visitorGoals: 3,
    createdAt: "2023-09-13T16:53:44.978Z",
    updatedAt: "2023-09-19T15:28:37.271Z",
    __v: 0,
  },
  {
    _id: "6501e9270d607533378fa7d7",
    gameId: "1064",
    local: 10,
    visitor: 6,
    hour: "20:00",
    played: false,
    date: 4,
    categorie: "masculino",
    localGoals: 1,
    visitorGoals: 2,
    createdAt: "2023-09-13T16:53:59.156Z",
    updatedAt: "2023-09-19T15:28:44.895Z",
    __v: 0,
  },
  {
    _id: "6501e9370d607533378fa7d9",
    gameId: "384",
    local: 3,
    visitor: 8,
    hour: "20:30",
    played: false,
    date: 4,
    categorie: "masculino",
    localGoals: 2,
    visitorGoals: 1,
    createdAt: "2023-09-13T16:54:15.748Z",
    updatedAt: "2023-09-19T15:28:46.647Z",
    __v: 0,
  },
  {
    _id: "6501e9440d607533378fa7db",
    gameId: "5124",
    local: 5,
    visitor: 12,
    hour: "21:00",
    played: false,
    date: 4,
    categorie: "masculino",
    localGoals: 0,
    visitorGoals: 2,
    createdAt: "2023-09-13T16:54:28.372Z",
    updatedAt: "2023-09-19T15:28:52.968Z",
    __v: 0,
  },
];

function calcularPuntosYDiferenciaDeGoles(resultados) {
  const equipos = {}; // Objeto para almacenar los datos de cada equipo

  // Recorremos los resultados para calcular los puntos y la diferencia de goles
  resultados.forEach((partido) => {
    const { local, visitor, localGoals, visitorGoals } = partido;

    // Inicializamos los datos del equipo local si aún no existen
    if (!equipos[local]) {
      equipos[local] = { puntos: 0, diferenciaGoles: 0, partidosJugados: 0 };
    }

    // Inicializamos los datos del equipo visitante si aún no existen
    if (!equipos[visitor]) {
      equipos[visitor] = { puntos: 0, diferenciaGoles: 0, partidosJugados: 0 };
    }

    // Calculamos la diferencia de goles
    const diferenciaGolesLocal = localGoals - visitorGoals;
    const diferenciaGolesVisitor = visitorGoals - localGoals;

    // Actualizamos los datos de los equipos y la cantidad de partidos jugados
    equipos[local].partidosJugados++;
    equipos[visitor].partidosJugados++;

    // Calculamos los puntos y actualizamos la diferencia de goles
    if (diferenciaGolesLocal > 0) {
      equipos[local].puntos += 2;
    } else if (diferenciaGolesLocal === 0) {
      equipos[local].puntos += 1;
      equipos[visitor].puntos += 1;
    } else {
      equipos[visitor].puntos += 2;
    }
    equipos[local].diferenciaGoles += diferenciaGolesLocal;
    equipos[visitor].diferenciaGoles += diferenciaGolesVisitor;
  });

  // Convertimos el objeto de equipos en un array de objetos
  const tablaPosiciones = Object.entries(equipos).map(([teamId, datos]) => ({
    teamId: Number(teamId),
    points: datos.puntos,
    diff: datos.diferenciaGoles,
    played: datos.partidosJugados,
  }));

  return tablaPosiciones;
}

const tabla = calcularPuntosYDiferenciaDeGoles(resultados);
console.log(tabla);
